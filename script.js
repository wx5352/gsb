// è¯­è¨€èµ„æºé…ç½®
const translations = {
    zh: {
        project_name: "é“¶å‘ AI åˆ›ä¸šè¯¾å ‚",
        nav_about: "é¡¹ç›®ä»‹ç»",
        nav_courses: "è¯¾ç¨‹å®‰æ’",
        nav_guide: "å­¦ä¹ æŒ‡å—",
        nav_faq: "å¸¸è§é—®é¢˜",
        nav_about_us: "å…³äºæˆ‘ä»¬",
        hero_title: "æ•™çˆ·çˆ·å¥¶å¥¶ç”¨ AI åˆ›ä¸šã€æ‹è§†é¢‘ã€å¼€ç›´æ’­",
        hero_subtitle: "è®©ç§‘æŠ€ç‚¹äº®é“¶å‘ç”Ÿæ´»ï¼Œç®€å•æ˜“å­¦çš„ AI åˆ›ä¸šè¯¾ç¨‹",
        hero_cta: "ä»ç¬¬ä¸€èŠ‚è¯¾å¼€å§‹å­¦ä¹ ",
        about_background_title: "é¡¹ç›®èƒŒæ™¯",
        about_background_text: "ä¸ºä»€ä¹ˆè¦æ•™è€å¹´äºº AIï¼Ÿåœ¨è¿™ä¸ªæ•°å­—åŒ–æ—¶ä»£ï¼Œæˆ‘ä»¬å¸Œæœ›é€šè¿‡ç®€å•æ˜“æ‡‚çš„æ•™å­¦ï¼Œå¸®åŠ©é•¿è¾ˆä»¬è·¨è¶Šæ•°å­—é¸¿æ²Ÿï¼Œäº«å—ç§‘æŠ€å¸¦æ¥çš„ä¾¿åˆ©ä¸ä¹è¶£ã€‚",
        about_goals_title: "é¡¹ç›®ç›®æ ‡",
        about_goals_text: "ä¸ä»…ä»…æ˜¯å­¦ä¹ æŠ€æœ¯ï¼Œæ›´æ˜¯ä¸ºäº†ï¼šå…¼èŒèµšé’±å¢åŠ æ”¶å…¥ã€è‡ªæˆ‘è¡¨è¾¾åˆ†äº«ç”Ÿæ´»ã€æ‹“å±•ç¤¾äº¤è®¤è¯†æ–°æœ‹å‹ã€‚",
        courses_title: "è¯¾ç¨‹å®‰æ’",
        guide_title: "å­¦ä¹ æŒ‡å—",
        guide_step1_title: "å‡†å¤‡è®¾å¤‡",
        guide_step1_text: "ä¸€éƒ¨æ™ºèƒ½æ‰‹æœºï¼Œä¿æŒç½‘ç»œé€šç•…",
        guide_step2_title: "è§‚çœ‹è§†é¢‘",
        guide_step2_text: "ç‚¹å‡»è¯¾ç¨‹å¡ç‰‡ï¼Œéšæ—¶éšåœ°å­¦ä¹ ",
        guide_step3_title: "åŠ¨æ‰‹å®è·µ",
        guide_step3_text: "è·Ÿç€è§†é¢‘æ“ä½œï¼Œé‡åˆ°é—®é¢˜éšæ—¶é—®",
        faq_title: "å¸¸è§é—®é¢˜",
        faq_q1: "å®Œå…¨ä¸æ‡‚ç”µè„‘èƒ½å­¦å—ï¼Ÿ",
        faq_a1: "å½“ç„¶å¯ä»¥ï¼æˆ‘ä»¬çš„è¯¾ç¨‹ä¸“ä¸ºé›¶åŸºç¡€è®¾è®¡",
        faq_q2: "å­¦ä¹ éœ€è¦æ”¶è´¹å—ï¼Ÿ",
        faq_a2: "æœ¬è¯¾ç¨‹ä¸ºå…¬ç›Šæ¯•ä¸šé¡¹ç›®ï¼Œå®Œå…¨å…è´¹å¼€æ”¾ã€‚",
        about_us_title: "å…³äºæˆ‘ä»¬",
        about_us_text: "è¿™æ˜¯ UKM-GSB çš„å­¦ç”Ÿæ¯•ä¸šé¡¹ç›®ï¼Œè‡´åŠ›äºé€šè¿‡æ•™è‚²èµ‹èƒ½ï¼Œè®©é“¶å‘æ—åœ¨ AI æ—¶ä»£ç„•å‘æ–°ç”Ÿæœºã€‚",
        mentors_title: "æŒ‡å¯¼è€å¸ˆ",
        students_title: "é¡¹ç›®æˆå‘˜",
        footer_text: "2026 é“¶å‘ AI åˆ›ä¸šè¯¾å ‚. UKM-GSB æ¯•ä¸šé¡¹ç›®",
        video_unsupported: "æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾ã€‚",
        watch_btn: "ç‚¹å‡»è§‚çœ‹",
        duration_label: "æ—¶é•¿",
        audience_label: "é€‚åˆäººç¾¤",
        course_1_title: "1. è®¤è¯† AIï¼šAI èƒ½å¸®æˆ‘åšä»€ä¹ˆï¼Ÿ",
        course_1_desc: "äº†è§£äººå·¥æ™ºèƒ½çš„åŸºæœ¬æ¦‚å¿µï¼Œå‘ç°å®ƒåœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­çš„ç¥å¥‡ç”¨é€”ã€‚",
        course_1_audience: "é›¶åŸºç¡€",
        course_2_title: "2. ç”¨ AI æ‰¾åˆ›ä¸šç‚¹å­ã€å†™æ–‡æ¡ˆã€åšå›¾ç‰‡å’ŒçŸ­è§†é¢‘",
        course_2_desc: "ä¸çŸ¥é“æ‹ä»€ä¹ˆï¼Ÿè®© AI å¸®ä½ å‡ºä¸»æ„ï¼Œä¸€é”®ç”Ÿæˆæ–‡æ¡ˆã€å›¾ç‰‡å’ŒçŸ­è§†é¢‘å†…å®¹ã€‚",
        course_2_audience: "æƒ³å°è¯•åˆ›ä½œ",
        course_3_title: "3. ç©è½¬çŸ­è§†é¢‘è´¦å·ä¸ç›´æ’­å¸¦è´§å…¥é—¨",
        course_3_desc: "ä»æ³¨å†Œè´¦å·åˆ°å‘å¸ƒä½œå“ï¼Œå†åˆ°ç›´æ’­è®¾å¤‡å’Œè¯æœ¯ï¼Œä¸€ç«™å¼å…¥é—¨ã€‚",
        course_3_audience: "è§†é¢‘æ–°æ‰‹/å‡†ä¸»æ’­",
        course_4_title: "4. å®‰å…¨é˜²éª—ä¸å¿ƒæ€å»ºè®¾",
        course_4_desc: "å¿«ä¹å­¦ä¹ ï¼Œå®‰å…¨ç¬¬ä¸€ã€‚è¯†åˆ«ç½‘ç»œè¯ˆéª—ï¼Œä¿æŒç§¯æå¥åº·çš„ä¸Šç½‘å¿ƒæ€ã€‚",
        course_4_audience: "æ‰€æœ‰å­¦å‘˜"
    },
    en: {
        project_name: "Silver AI Entrepreneurship Class",
        nav_about: "About Project",
        nav_courses: "Courses",
        nav_guide: "Guide",
        nav_faq: "FAQ",
        nav_about_us: "About Us",
        hero_title: "Teach Seniors to Use AI for Entrepreneurship, Video & Live Streaming",
        hero_subtitle: "Lighting up silver lives with technology, easy-to-learn AI courses",
        hero_cta: "Start First Lesson",
        about_background_title: "Background",
        about_background_text: "Why teach seniors AI? In this digital age, we hope to help elders bridge the digital divide through simple teaching and enjoy the convenience and fun of technology.",
        about_goals_title: "Goals",
        about_goals_text: "Not just learning tech, but for: Part-time income, Self-expression, and Socializing.",
        courses_title: "Course Schedule",
        guide_title: "Learning Guide",
        guide_step1_title: "Prepare Device",
        guide_step1_text: "A smartphone with internet access",
        guide_step2_title: "Watch Videos",
        guide_step2_text: "Click cards to learn anytime, anywhere",
        guide_step3_title: "Practice",
        guide_step3_text: "Follow along and ask questions",
        faq_title: "FAQ",
        faq_q1: "Can I learn without computer skills?",
        faq_a1: "Absolutely! Our courses are designed for beginners",
        faq_q2: "Is it free?",
        faq_a2: "Yes, this is a graduation project and completely free.",
        about_us_title: "About Us",
        about_us_text: "This is a UKM-GSB student graduation project, dedicated to empowering seniors in the AI era through education.",
        mentors_title: "Mentors",
        students_title: "Team Members",
        footer_text: "2026 Silver AI Entrepreneurship Class. UKM-GSB Project",
        video_unsupported: "Your browser does not support video playback.",
        watch_btn: "Watch Now",
        duration_label: "Duration",
        audience_label: "Audience",
        course_1_title: "1. Intro to AI: What can AI do?",
        course_1_desc: "Understand basic AI concepts and its magical uses in daily life.",
        course_1_audience: "Beginners",
        course_2_title: "2. AI for Ideas, Copywriting, Images & Videos",
        course_2_desc: "Let AI help you brainstorm, write copy, and create beautiful visuals.",
        course_2_audience: "Creators",
        course_3_title: "3. Short Video Accounts & Live Streaming",
        course_3_desc: "From account setup to posting, plus equipment and scripts for live streaming.",
        course_3_audience: "Newbies/Streamers",
        course_4_title: "4. Safety & Mindset",
        course_4_desc: "Happy learning, safety first. Identify scams and maintain a healthy mindset.",
        course_4_audience: "Everyone"
    },
    ms: {
        project_name: "Kelas Keusahawanan AI Warga Emas",
        nav_about: "Mengenai Projek",
        nav_courses: "Kursus",
        nav_guide: "Panduan",
        nav_faq: "Soalan Lazim",
        nav_about_us: "Tentang Kami",
        hero_title: "Ajar Warga Emas Guna AI untuk Berniaga & Video",
        hero_subtitle: "Menyerikan kehidupan warga emas dengan teknologi, kursus AI yang mudah dipelajari",
        hero_cta: "Mula Belajar",
        about_background_title: "Latar Belakang",
        about_background_text: "Mengapa ajar warga emas AI? Di era digital ini, kami ingin membantu mereka merapatkan jurang digital melalui pembelajaran mudah.",
        about_goals_title: "Matlamat",
        about_goals_text: "Bukan sekadar teknikal, tetapi untuk: Pendapatan sampingan, Ekspresi diri, dan Bersosial.",
        courses_title: "Jadual Kursus",
        guide_title: "Panduan Belajar",
        guide_step1_title: "Sediakan Peranti",
        guide_step1_text: "Telefon pintar dengan internet",
        guide_step2_title: "Tonton Video",
        guide_step2_text: "Klik kad untuk belajar bila-bila masa",
        guide_step3_title: "Latihan Amali",
        guide_step3_text: "Ikut video dan tanya soalan",
        faq_title: "Soalan Lazim",
        faq_q1: "Tiada asas komputer boleh belajar?",
        faq_a1: "Boleh! Kursus ini khas untuk pemula",
        faq_q2: "Adakah ianya percuma?",
        faq_a2: "Ya, ini adalah projek graduasi dan percuma sepenuhnya.",
        about_us_title: "Tentang Kami",
        about_us_text: "Ini adalah projek pelajar UKM-GSB, berdedikasi untuk memperkasa warga emas di era AI.",
        mentors_title: "Mentor",
        students_title: "Ahli Pasukan",
        footer_text: "2026 Kelas Keusahawanan AI Warga Emas. Projek UKM-GSB",
        video_unsupported: "Pelayar anda tidak menyokong main balik video.",
        watch_btn: "Tonton Sekarang",
        duration_label: "Tempoh",
        audience_label: "Sasaran",
        course_1_title: "1. Pengenalan AI: Apa AI boleh buat?",
        course_1_desc: "Fahami konsep asas AI dan kegunaannya dalam kehidupan seharian.",
        course_1_audience: "Pemula",
        course_2_title: "2. AI untuk Idea, Penulisan, Gambar & Video",
        course_2_desc: "Biar AI bantu anda cari idea, tulis ayat menarik, dan hasilkan visual cantik.",
        course_2_audience: "Pencipta",
        course_3_title: "3. Urus Akaun Video Pendek & Siaran Langsung",
        course_3_desc: "Dari daftar akaun hingga muat naik, serta peralatan dan skrip untuk live.",
        course_3_audience: "Pemula/Streamer",
        course_4_title: "4. Keselamatan & Minda",
        course_4_desc: "Belajar dengan gembira dan selamat. Kenali penipuan dalam talian.",
        course_4_audience: "Semua"
    }
};

// è¯¾ç¨‹åŸºç¡€æ•°æ® (IDå’Œæ—¶é•¿/ç¼©ç•¥å›¾æ˜¯é€šç”¨çš„ï¼Œæ–‡æœ¬ä»ç¿»è¯‘å¯¹è±¡ä¸­è·å–)
const courseData = [
    { id: 1, duration: "10 min", thumbnail: "ğŸ¤–", videoUrl: "video/beginning.mp4" },
    { id: 2, duration: "25 min", thumbnail: "ğŸ’¡", videoUrl: "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4" },
    { id: 3, duration: "30 min", thumbnail: "ğŸ¥", videoUrl: "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerBlazes.mp4" },
    { id: 4, duration: "15 min", thumbnail: "ğŸ›¡ï¸", videoUrl: "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerJoyrides.mp4" }
];

// å½“å‰è¯­è¨€
let currentLang = 'en';

// DOMå…ƒç´ 
const courseGrid = document.getElementById('courseGrid');
const videoModal = document.getElementById('videoModal');
const videoPlayer = document.getElementById('videoPlayer');
const videoTitle = document.getElementById('videoTitle');
const videoDescription = document.getElementById('videoDescription');
const closeBtn = document.querySelector('.close');
const navLinks = document.querySelectorAll('.nav-link');
const languageSelect = document.getElementById('languageSelect');

// åˆå§‹åŒ–é¡µé¢
document.addEventListener('DOMContentLoaded', function() {
    // å¼ºåˆ¶é‡ç½®ä¸‹æ‹‰æ¡†çš„å€¼ä¸ºé»˜è®¤è¯­è¨€ 'en'
    if (languageSelect) {
        languageSelect.value = currentLang; 
    }
    
    // è®¾ç½®åˆå§‹è¯­è¨€å±æ€§
    document.documentElement.lang = currentLang;
    renderContent();
    setupEventListeners();
});

// æ¸²æŸ“æ‰€æœ‰å†…å®¹
function renderContent() {
    updateText();
    renderCourses();
}

// æ›´æ–°é™æ€æ–‡æœ¬
function updateText() {
    const elements = document.querySelectorAll('[data-i18n]');
    elements.forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (translations[currentLang][key]) {
            element.textContent = translations[currentLang][key];
        }
    });
}

// æ¸²æŸ“è¯¾ç¨‹åˆ—è¡¨
function renderCourses() {
    courseGrid.innerHTML = '';
    
    courseData.forEach(course => {
        const t = translations[currentLang];
        // åŠ¨æ€è·å–è¯¾ç¨‹æ–‡æœ¬
        const title = t[`course_${course.id}_title`];
        const desc = t[`course_${course.id}_desc`];
        const audience = t[`course_${course.id}_audience`];
        
        const courseCard = document.createElement('div');
        courseCard.className = 'course-card';
        courseCard.innerHTML = `
            <div class="course-thumbnail">${course.thumbnail}</div>
            <h3>${title}</h3>
            <p>${desc}</p>
            <div class="course-meta">
                <span>ğŸ‘¥ ${audience}</span>
            </div>
            <a href="javascript:void(0)" class="btn-card">${t.watch_btn}</a>
        `;
        
        courseCard.addEventListener('click', () => openVideoModal(course, title, desc));
        courseGrid.appendChild(courseCard);
    });
}

// æ‰“å¼€è§†é¢‘æ¨¡æ€æ¡†
function openVideoModal(course, title, desc) {
    videoTitle.textContent = title;
    videoDescription.textContent = desc;
    videoPlayer.src = course.videoUrl;
    videoModal.style.display = 'block';
    
    // æ’­æ”¾è§†é¢‘
    videoPlayer.play().catch(err => {
        console.log('è‡ªåŠ¨æ’­æ”¾è¢«é˜»æ­¢ï¼Œç”¨æˆ·éœ€è¦æ‰‹åŠ¨ç‚¹å‡»æ’­æ”¾');
    });
}

// å…³é—­è§†é¢‘æ¨¡æ€æ¡†
function closeVideoModal() {
    videoModal.style.display = 'none';
    videoPlayer.pause();
    videoPlayer.src = '';
}

// è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
function setupEventListeners() {
    // è¯­è¨€åˆ‡æ¢
    languageSelect.addEventListener('change', (e) => {
        currentLang = e.target.value;
        document.documentElement.lang = currentLang; // Update html lang attr
        renderContent();
    });

    // å…³é—­æŒ‰é’®
    closeBtn.addEventListener('click', closeVideoModal);
    
    // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
    window.addEventListener('click', function(event) {
        if (event.target === videoModal) {
            closeVideoModal();
        }
    });
    
    // ESCé”®å…³é—­
    document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape' && videoModal.style.display === 'block') {
            closeVideoModal();
        }
    });
    
    // å¹³æ»‘æ»šåŠ¨å¯¼èˆª
    navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            // å¦‚æœåªæ˜¯åˆ‡æ¢è¯­è¨€ï¼Œä¸éœ€è¦é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼ˆè¿™é‡Œå…¶å®å·²ç»åœ¨HTMLé‡Œå¤„ç†äº†hrefï¼‰
            // ä¸»è¦æ˜¯ä¸ºäº†å¹³æ»‘æ»šåŠ¨
            const href = this.getAttribute('href');
            if (href.startsWith('#')) {
                e.preventDefault();
                const targetId = href.substring(1);
                const targetElement = document.getElementById(targetId);
                if (targetElement) {
                    targetElement.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            }
        });
    });
}
